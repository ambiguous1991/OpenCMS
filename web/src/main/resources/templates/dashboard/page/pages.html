<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title th:text="${@systemVariables.get(@varkey.PAGE_NAME)}+${breadcrumbTitle}">Failed</title>
    <div th:replace="fragment/import"></div>
    <link rel="stylesheet" href="../../../static/css/opencms.css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    <link rel="stylesheet" href="../../../static/css/bootstrap.css"/>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

</head>
<body class="d-flex flex-column vh-100">
<nav th:replace="fragment/admin-navbar"></nav>
<nav th:replace="fragment/admin-breadcrumb"></nav>
<div class="wrapper" style="max-height: 100vh;">
    <div th:replace="fragment/admin-sidebar"></div>
    <div class="container-fluid d-flex flex-column shadow-lg m-5 p-5">
        <h2 class="mb-4">Edycja stron</h2>
        <div th:if="${param.deleteSuccess!=null}" class="alert alert-success alert-dismissible fade show"
             role="alert">
            <i class="fas fa-check-circle" style="font-size: 2em;"></i>
            <strong>Strona została usunięta!</strong>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <input type="text"/>
        <div th:if="${pages.size()>0}" class="d-flex overflow-auto flex-column" style="flex:1;">
            <table class="table table-responsive-lg table-striped table-bordered table-hover">
                <thead>
                <tr class="table-success">
                    <th>identyfikator</th>
                    <th>tytuł strony</th>
                    <th>liczba podstron</th>
                    <th>data utworzenia</th>
                    <th>data aktualizacji</th>
                    <th>uprawnienia podglądu</th>
                    <th>widoczna</th>
                    <th>edycja</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="page: ${pages}">
                    <th th:text="${page.getTitle()}">moja-strona-główna</th>
                    <th th:text="${page.getTitle()}">Strona główna</th>
                    <th th:text="${page.getSubpages().size()}">0</th>
                    <th th:text="${#temporals.format(page.getCreated(),@systemVariables.get(@varkey.SYSTEM_DASHBOARD_DATE_FORMAT))}">2019-05-11</th>
                    <th th:text="${#temporals.format(page.getUpdated(), @systemVariables.get(@varkey.SYSTEM_DASHBOARD_DATE_FORMAT))}">2019-05-11</th>
                    <th th:text="${page.getAuthoritiesAsString()}">Każdy</th>
                    <th th:text="${page.getVisible()}?'tak':'nie'">Tak</th>
                    <th>
                        <a href="#" th:href="'/dashboard/page/'+${page.getId()}" class="btn btn-sm btn-block btn-info">modyfikuj</a>
                        <a href="#" th:href="'/dashboard/page/'+${page.getId()}+'/edit'" class="btn btn-sm btn-block btn-success">edytuj treść</a>
                        <a href="#" th:href="'/dashboard/page/'+${page.getId()}+'/delete'" class="btn btn-sm btn-block btn-danger">usuń</a>
                    </th>
                </tr>
                </tbody>
            </table>

        </div>
        <div th:if="${pages.size()==0}" class="alert alert-info text-center p-4">
            W tej chwili, nie ma jeszcze żadnej strony.
        </div>
        <form class="align-self-center mt-4" action="/dashboard/page/new" method="post">
            <input
                    id="csrf"
                    type="hidden"
                    th:name="${_csrf.parameterName}"
                    th:value="${_csrf.token}"/>
            <button style="font-size: 1.3rem;" class="btn btn-success" type="submit"><i class="fas fa-folder-plus"></i>
                Utwórz nową stronę
            </button>
        </form>
    </div>
</div>
</body>
</html>